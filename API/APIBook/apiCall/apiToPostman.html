<!DOCTYPE html>
<html>
<head>
	<title></title>
    <!-- <script>https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js</script> -->
</head>
<body onload="loadDoc()">
<h2>Book API Test</h2>
<div class="container">
    <table id="booktable" class="display" style="width:100%">
            <tr>
                <th>id</th>
                <th>Book Name</th>
                <th>Author</th>
                <th>Publisher</th>
                <th>Price</th>
            </tr>
    </table>
</div>
<!-- <img id="productImg"src="" width="200px"> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var obj_arr = JSON.parse( this.responseText);
            console.log(obj_arr);
            var book_data = "";

            $.each(obj_arr,function(key,value){
                console.log(value.id);

                book_data += '<tr>';
                book_data += '<td>'+value.id +'</td>';
                book_data += '<td>'+value.book_name +'</td>';
                book_data += '<td>'+value.author_name +'</td>';
                book_data += '<td>'+value.publisher_name +'</td>';
                book_data += '<td>'+value.price +'</td>'
                book_data += '</tr>';
            })
            $('booktable').append(book_data);
        
        // obj_arr.forEach(function(obj_arr){
        //     console.log(obj_arr.id);
        //     document.getElementById("id").innerHTML =obj_arr.id;
        //     document.getElementById("book_name").innerHTML =obj_arr.book_name;
        //     document.getElementById("price").innerHTML =obj_arr.price;
        // });

        // for(var i = 0;i < obj_arr.length-1;i++){
        //     document.getElementById("id").innerHTML =obj_arr[i].id;
        //     document.getElementById("book_name").innerHTML =obj_arr[i].book_name;
        //     document.getElementById("price").innerHTML =obj_arr[i].price;
        // }      
    }
  };
  xhttp.open("GET", "http://127.0.0.1:8000/api/welcome");
  xhttp.send();
}
</script>
<!-- <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
</body>
</html>